<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition template="../../pages/template/templateInicio.xhtml">
<ui:define name="content">

<h:form id="formularioFrm" enctype="multipart/form-data">
<h:panelGroup id="panelForm" rendered="#{!declaracionAguinaldoBean.estaDeclarado}">
<p:panelGrid id="gridForm">
<f:facet name="header">
    <p:row>
        <p:column colspan="16">Formulario Único de Presentación de Planilla de Aguinaldo</p:column>
    </p:row>
    <p:row>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
        <p:column colspan="1"></p:column>
    </p:row>
</f:facet>


<p:row>
    <p:column colspan="4" rowspan="2">
        <p:graphicImage value="/assets/img/escudo-prime.png"/>
    </p:column>
    <p:column colspan="8">
        
        <p align="center">
            FORMULARIO ÚNICO DE PRESENTACIÓN DE PLANILLA DE AGUINALDO<br/>
            DECLARACIÓN JURADA
        </p>
    </p:column>
    <p:column colspan="4">
        <p:outputLabel value="FORM :"/>
        <b><p:outputLabel value="#{declaracionAguinaldoBean.documento.docDefinicion.docDefinicionPK.codDocumento} Ver. 0#{declaracionAguinaldoBean.documento.docDefinicion.docDefinicionPK.version}" style="font-size: 16px"/></b>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="4">
        <p:outputLabel value="1. DATOS DEL FORMULARIO"/>
    </p:column>
    <p:column colspan="8">
        <p:panelGrid columns="2">
            <p:outputLabel value="1.1 Nro de Orden"/>
            <p:inputText value="#{declaracionAguinaldoBean.numeroOrden}"
                         style="width: 150px; height: 10px; text-align: right" disabled="true" onkeyup=""/>
            <p:outputLabel value="1.2 Rectificatoria"/>
            <p:selectBooleanCheckbox value="#{declaracionAguinaldoBean.esRectificatorio}" disabled="true"/>
            <p:outputLabel value="1.3 Nro de orden que rectifica"/>
            <p:outputLabel value="#{declaracionAguinaldoBean.rectificatorio.idDocumento.numeroDocumento}&nbsp;-&nbsp;#{declaracionAguinaldoBean.rectificatorio.parCalendario.parCalendarioPK.tipoPeriodo}" style="width: 150px; height: 10px; text-align: right" disabled="#{!declaracionAguinaldoBean.esRectificatorio}" />
        </p:panelGrid>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="16" style="background-color: #2264B1; color: #FFFFFF">
        <p:outputLabel value="2. DATOS DE LA PRESENTACIÓN"/>
    </p:column>
</p:row>

<p:row id="filaRazon">
    <p:column colspan="4">
        <p:outputLabel value="2.1 Total nacional"/>
    </p:column>
    <p:column colspan="1">
        <div align="CENTER">
            <p:selectBooleanCheckbox value="#{declaracionAguinaldoBean.check_tipoEmpresa}" disabled="true"/> 
        </div>
    </p:column>
    <p:column colspan="5">
        <p:outputLabel value="2.2 Oficina central o Nro de sucursal"/>
        <p:outputLabel value="2.3 Gestion"/>
    </p:column>
    <p:column id="razonSocial" colspan="6">
        <p:outputPanel id="empresaRazonSocial">
            <h:outputLabel value="#{declaracionAguinaldoBean.unidadSeleccionada.nombreComercial}"/>
            <h:outputLabel value="#{declaracionAguinaldoBean.gestion}" />
        </p:outputPanel>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="16" style="background-color: #2264B1; color: #FFFFFF">
        <p:outputLabel value="3. DATOS GENERALES DEL EMPLEADOR"/>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="2">
        <p:outputLabel value="3.1 Nro de empleador MTEPS:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.nroOtro}"/>
    </p:column>
    <p:column colspan="3">
        <p:outputLabel value="3.2 Nro patronal del seguro social:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.nroCajaSalud}"/>
    </p:column>
    <p:column colspan="2">
        <p:outputLabel value="3.3 Nro de NIT:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.nroIdentificacion}"/>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="3">
        <p:outputLabel value="3.4 Nombre o razón social:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="7">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.nombreRazonSocial}"/>
    </p:column>
    <p:column colspan="3">
        <p:outputLabel value="3.5 Actividad Económica principal:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.actividadDeclarada}"/>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="3">
        <p:outputLabel value="3.6 Departamento:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="2">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.dirDepartamento}"/>
    </p:column>
    <p:column colspan="4">
        <p:outputLabel value="3.7 Ciudad o localidad:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.localidad}"/>
    </p:column>
    <p:column colspan="1">
        <p:outputLabel value="3.8 Zona:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.dirZona}"/>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="2">
        <p:outputLabel value="3.9 Dirección:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="12">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.dirDireccion}"/>
    </p:column>
    <p:column colspan="1">
        <p:outputLabel value="3.10 Nro:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="1">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.dirNroDireccion}"/>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="2">
        <p:outputLabel value="3.11 Teléfono:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.telefono}"/>
    </p:column>
    <p:column colspan="2">
        <p:outputLabel value="3.12 Fax:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.fax}"/>
    </p:column>
    <p:column colspan="3">
        <p:outputLabel value="3.13 Correo Electronico:" style="font-weight:bold"/>
    </p:column>
    <p:column colspan="3">
        <h:outputText value="#{declaracionAguinaldoBean.vperPersona.email}"/>
    </p:column>
</p:row>

<p:row rendered="#{declaracionAguinaldoBean.parametro!=2}">
    <p:column colspan="8" style="background-color: #2264B1; color: #FFFFFF">
        <p:outputLabel value="4. COMPOSICIÓN SALARIAL"/>
    </p:column>
    <p:column colspan="8" style="background-color: #2264B1; color: #FFFFFF">
        <p:outputLabel value="5. TRABAJADORES"/>
    </p:column>
</p:row>

<p:row rendered="#{declaracionAguinaldoBean.parametro!=2}">
    <p:column colspan="8">
        <p:panelGrid columns="2">
            <p:outputLabel value="Concepto" style="font-weight: bold; text-align: right"/>
            <p:outputLabel value="Monto (Bs)" style="font-weight: bold; text-align: left"/>

            <p:outputLabel value="4.1 Haber Basico" style="text-align: right"/>
            <pe:inputNumber id="basico" value="#{declaracionAguinaldoBean.docPlanilla.haberBasico}" disabled="#{declaracionAguinaldoBean.parametro==2}"
                            thousandSeparator="." decimalSeparator="," style="width: 100px; height: 10px; text-align: right" required="true" maxlength="10">
                <p:ajax event="blur" update="pagable"/>
            </pe:inputNumber>

            <p:outputLabel value="4.2 Bono Antiguedad" style="text-align: right"/>
            <pe:inputNumber id="bonoAn" value="#{declaracionAguinaldoBean.docPlanilla.bonoAntiguedad}" disabled="#{declaracionAguinaldoBean.parametro==2}"
                            thousandSeparator="." decimalSeparator="," style="width: 100px; height: 10px; text-align: right" required="true" maxlength="10">
                <p:ajax event="blur" update="pagable"/>
            </pe:inputNumber>

            <p:outputLabel value="4.3 Bono Produccion" style="text-align: right"/>
            <pe:inputNumber id="BonoPr" value="#{declaracionAguinaldoBean.docPlanilla.bonoProduccion}" disabled="#{declaracionAguinaldoBean.parametro==2}"
                            thousandSeparator="." decimalSeparator="," style="width: 100px; height: 10px; text-align: right" required="true" maxlength="10">
                <p:ajax event="blur" update="pagable"/>
            </pe:inputNumber>

            <p:outputLabel value="4.4 Subsidio Frontera" style="text-align: right"/>
            <pe:inputNumber id="subFr" value="#{declaracionAguinaldoBean.docPlanilla.subsidioFrontera}" disabled="#{declaracionAguinaldoBean.parametro==2}"
                            thousandSeparator="." decimalSeparator="," style="width: 100px; height: 10px; text-align: right" required="true" maxlength="10">
                <p:ajax event="blur" update="pagable"/>
            </pe:inputNumber>

            <p:outputLabel value="4.5 Labor Extra" style=" text-align: right"/>
            <pe:inputNumber id="laborEx" value="#{declaracionAguinaldoBean.docPlanilla.laborExtra}" disabled="#{declaracionAguinaldoBean.parametro==2}"
                            thousandSeparator="." decimalSeparator="," style="width: 100px; height: 10px; text-align: right" required="true" maxlength="10">
                <p:ajax event="blur" update="pagable"/>
            </pe:inputNumber>

            <p:outputLabel value="4.6 Otros Bonos" style=" text-align: right"/>
            <pe:inputNumber id="otrosB" value="#{declaracionAguinaldoBean.docPlanilla.otrosBonos}" disabled="#{declaracionAguinaldoBean.parametro==2}"
                            thousandSeparator="." decimalSeparator="," style="width: 100px; height: 10px; text-align: right" required="true" maxlength="10">
                <p:ajax event="blur" update="pagable"/>
            </pe:inputNumber>

            <p:outputLabel value="4.7 Total Ganado" style="font-weight: bold;  text-align: right"/>
            <pe:inputNumber id="pagable" value="#{(declaracionAguinaldoBean.docPlanilla.haberBasico +
                                                                               declaracionAguinaldoBean.docPlanilla.bonoAntiguedad + declaracionAguinaldoBean.docPlanilla.bonoProduccion +
                                                                               declaracionAguinaldoBean.docPlanilla.subsidioFrontera + declaracionAguinaldoBean.docPlanilla.laborExtra +
                                                                               declaracionAguinaldoBean.docPlanilla.otrosBonos) - (declaracionAguinaldoBean.docPlanilla.aporteAfp +
                                                                               declaracionAguinaldoBean.docPlanilla.rciva + declaracionAguinaldoBean.docPlanilla.otrosDescuentos)}"
                            disabled="true"
                            thousandSeparator="." decimalSeparator="," style="font-weight: bold; width: 100px; height: 10px; text-align: right; border: none; box-shadow: none; cursor:auto; opacity: 4.35"/>
        </p:panelGrid>
    </p:column>

    <p:column colspan="8" >
        <p:panelGrid columns="4">
            <p:outputLabel value="       " style=" text-align: center"/>
            <p:outputLabel value="Varones" style=" text-align: center"/>
            <p:outputLabel value="Mujeres" style="text-align: center"/>
            <p:outputLabel value="Total" style=" text-align: center"/>

            <p:outputLabel value="5.1 Total Trabajadores" style=" text-align: center"/>
            <p:inputText id="varones" value="#{declaracionAguinaldoBean.docPlanilla.nroH}"
                         style="width: 60px; height: 10px; text-align: right" required="true" maxlength="6">
                <p:ajax event="keyup" update="totalTrabajadores"/>
                <pe:keyFilter regEx="/[\d\-]/"/>
            </p:inputText>

            <p:inputText id="mujeres" value="#{declaracionAguinaldoBean.docPlanilla.nroM}"
                         style="width: 60px; height: 10px; text-align: right" required="true" maxlength="6">
                <p:ajax event="keyup" update="totalTrabajadores"/>
                <pe:keyFilter regEx="/[\d\-]/"/>
            </p:inputText>

            <p:inputText id="totalTrabajadores"
                         value="#{(declaracionAguinaldoBean.docPlanilla.nroH + declaracionAguinaldoBean.docPlanilla.nroM)}" disabled="true"
                         style="width: 50px; height: 10px; text-align: right; border: none; box-shadow: none; cursor:auto; opacity: 4.35">
            </p:inputText>
        </p:panelGrid>

    </p:column>

</p:row>

<p:row>
    <p:column colspan="16" style="background-color: #2264B1; color: #FFFFFF">
        <p:outputLabel value="6. COMPROBANTE DE DEPÓSITO"/>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="6">
        <p:outputLabel value="6.1 Nro de comprobante de depósito"/>
        <p:inputText value="#{declaracionAguinaldoBean.docPlanilla.numOperacion}"
                     style="width: 160px; height: 10px; text-align: right" required="true" maxlength="20">
            <pe:keyFilter regEx="/[\d\-]/"/>
        </p:inputText>
    </p:column>
    <p:column colspan="7">
        <p:outputLabel value="6.2 Fecha de depósito"/>
        <p:calendar value="#{declaracionAguinaldoBean.fechaOperacionAux}" maxdate="#{declaracionAguinaldoBean.fechaTexto}"
                    id="popupButtonCal" pattern="dd/MM/yyyy" style="width: 8px; height: 10px; text-align: right"
                    required="true" showOn="button" />
    </p:column>
    <p:column colspan="3">
        <p:outputLabel value="6.3 Monto de depósito (Bs)"/>
        <pe:inputNumber value="#{declaracionAguinaldoBean.docPlanilla.montoOperacion}"
                        thousandSeparator="." decimalSeparator=","  style="width: 110px; height: 10px; text-align: right" maxlength="10">
        </pe:inputNumber>
    </p:column>
</p:row>

<p:row>
    <p:column colspan="16">
        <b>IMPORTANTE: </b>Los derechos laborales de las trabajadoras y los trabajadores son irrenunciables y son nulas las convenciones contrarias o que tiendan a burlar sus
        efectos, por lo tanto los datos contenidos en el presente formulario y los documentos parte de este trámite no causan estado ni revisten el sello de cosa juzgada.
    </p:column>
</p:row>

<p:row>
    <p:column colspan="10">
        <p:panelGrid columns="2">
            <p:outputLabel value="Nombre de empleador y/o representante legal" style="font-weight: bold"/>
            <p:outputLabel
                    value="#{declaracionAguinaldoBean.vperPersona.rlNombre lt '1' ? declaracionAguinaldoBean.vperPersona.nombreRazonSocial : declaracionAguinaldoBean.vperPersona.rlNombre}"/>
            <p:outputLabel value="Nro de documento de identidad" style="font-weight: bold"/>
            <p:outputLabel
                    value="#{declaracionAguinaldoBean.vperPersona.rlNombre lt '1' ? declaracionAguinaldoBean.vperPersona.nroIdentificacion : declaracionAguinaldoBean.vperPersona.rlNroIdentidad}"
                    style="width: 150px; height: 10px; text-align: left"/>
            <p:outputLabel value="Lugar de Presentación" style="font-weight: bold"/>
            <h:outputText value="Oficina Virtual" style="width: 150px; height: 10px"/>
        </p:panelGrid>
    </p:column>
    <p:column colspan="6">
        <p:panelGrid columns="2">
            <p:outputLabel value="Fecha Presentación" style="font-weight: bold"/>
            <p:outputLabel value="#{declaracionAguinaldoBean.fechaTemp}" style="width: 150px; height: 10px">
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </p:outputLabel>
        </p:panelGrid>
    </p:column>
</p:row>

</p:panelGrid>



<!-- Renato Codigo -->
<h:panelGrid columns="2" style="text-align: left" rendered="#{declaracionAguinaldoBean.parametro!=2}">
    <h:outputText style="font-weight: bold;text-align: center" value="Planilla Aguinaldo"
                  rendered="#{declaracionAguinaldoBean.habilita}"/> &nbsp;
    <p:fileUpload fileUploadListener="#{declaracionAguinaldoBean.upload}" uploadLabel="Subir" cancelLabel="Cancelar"
                  fileLimitMessage="Sólo se puede elegir un archivo."
                  invalidFileMessage="El archivo no es válido, solo se acepta extensiones: .xls, .xlsx y .csv..."
                  style="width: 500px"
                  mode="advanced" update="idArchivo1,guardarPlanillaBtn" fileLimit="1" label="Seleccione"
                  invalidSizeMessage="Archivo demasiado grande."
                  sizeLimit="5242880" allowTypes="/(\.|\/)(xls|xlsx|csv|XLS|XLSX|CSV)$/"
                  rendered="#{declaracionAguinaldoBean.habilita}"/>
    <h:outputText id="idArchivo1" value="#{declaracionAguinaldoBean.nombres[0]}"
                  style="font-weight: bold;text-align: center"/>

    <p:growl id="messages" showDetail="true"/>
</h:panelGrid>

<div align="CENTER">
    <p:commandButton id="guardarPlanillaBtn" value="Enviar Declaracion Jurada"
                     action="#{declaracionAguinaldoBean.guardaDocumentoPlanillaBinarioAgunaldoBean}" update="formularioFrm messages"
                     disabled="#{declaracionAguinaldoBean.habilita}">
        <p:confirm header="Declaración jurada"
                   message="Si continua, procederá a realizar una declaración jurada. Asegúrese que los datos esten correctamente llenados. Deséa continuar?"
                   icon="ui-icon-alert"/>
    </p:commandButton>
</div>

<p:confirmDialog id="confirmarDeclaracion" global="true" showEffect="fade" hideEffect="explode">
    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
</p:confirmDialog>
</h:panelGroup>
</h:form>

</ui:define>
</ui:composition>
</html>