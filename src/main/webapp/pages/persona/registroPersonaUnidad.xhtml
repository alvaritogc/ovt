<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="../template/templateInicio.xhtml">
    <ui:define name="content">

        <p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();"/>

        <p:dialog modal="true" widgetVar="statusDialog" header="Cargando"
                  draggable="false" closable="false">
            <p:graphicImage value="../../images/ajax-loader.gif" />
        </p:dialog>


    <h3>Empleador o Empresa: #{personaUnidadBean.titulo} </h3>


     <p:tabView id="tabPersonaUnidad" effect="fade" effectDuration="normal" orientation="top" >

         <p:tab id="tabUnidadPrincipal" >
             <f:facet name="title">
                 <p:graphicImage value="/images/unidad.png"/>
                 <h:outputText value=" UNIDAD PRINCIPAL"/>
             </f:facet>
             <ui:include src="../persona/tabs/unidadPrincipal.xhtml"/>
         </p:tab>


         <p:tab id="tabActividad"  >
             <f:facet name="title">
                 <p:graphicImage value="/images/actividadDeclarada.png"/>
                 <h:outputText value=" ACTIVIDAD DECLARADA"/>
             </f:facet>
             <ui:include src="../persona/tabs/actividadDeclaradaPrincipal.xhtml"/>
         </p:tab>

         <p:tab id="tabRepLegal" >
             <f:facet name="title">
                 <p:graphicImage value="/images/repLegal.png"/>
                 <h:outputText value=" REPRESENTANTE LEGAL"/>
             </f:facet>
             <ui:include src="../persona/tabs/representanteLegalPrincipal.xhtml"/>
         </p:tab>

         <p:tab id="tabDireccion" >
             <f:facet name="title">
                 <p:graphicImage value="/images/direccion.png"/>
                 <h:outputText value=" DIRECCION"/>
             </f:facet>
                <ui:include src="../persona/tabs/direccionPrincipal.xhtml"/>
         </p:tab>

     </p:tabView>


    <h:form id="frmBucarPersona">
            <br/>
            <p:commandButton value="Agregar Unidad o Sucursal"
                             action="#{personaUnidadBean.nuevo}"
                             icon="ui-icon-plus"
                             update=":frmUnidad:pnlUnidad,:txtDldUnidad,:frmUnidad:cmdButtonUnidad"
                             onclick="PF('dlgUnidad').show()">
                <f:setPropertyActionListener value="Nuevo" target="#{personaUnidadBean.tituloDialog}"/>
                <f:setPropertyActionListener value="ui-icon-disk" target="#{personaUnidadBean.iconoUnidad}"/>
            </p:commandButton>
    </h:form>

              <!-- ******************** DIALOGOS ********************** -->

        <p:dialog id="dlgRepLegal"  widgetVar="dlgRepLegal" resizable="false" modal="true" width="450">
            <f:facet name="header">
                <h:outputText id="txtDlgRepLegal" value="#{personaUnidadBean.tituloDialog}"/>
            </f:facet>
            <ui:include src="../persona/includeDialogo/representanteLegal.xhtml"/>
        </p:dialog>


        <p:dialog id="dlgDireccion"  widgetVar="dlgDireccion" width="430" modal="true" resizable="false">
            <f:facet name="header">
                <h:outputText id="txtDlgDireccion" value="#{personaUnidadBean.tituloDialog}"/>
            </f:facet>
            <ui:include src="../persona/includeDialogo/direccion.xhtml"/>
        </p:dialog>

        <p:dialog id="dlgActividadDeclarada"  widgetVar="dlgActividadDeclarada" resizable="false" modal="true">
            <f:facet name="header">
                <h:outputText id="txtDlgActividadDeclarada" value="#{personaUnidadBean.tituloDialog}"/>
            </f:facet>
            <ui:include src="../persona/includeDialogo/actividadDeclarada.xhtml"/>
        </p:dialog>

        <p:dialog id="dlgUnidad"  widgetVar="dlgUnidad"  modal="true" width="430" resizable="false">
            <f:facet name="header">
                <h:outputText id="txtDldUnidad" value="#{personaUnidadBean.tituloDialog}"/>
            </f:facet>
            <ui:include src="../persona/includeDialogo/unidad.xhtml"/>
        </p:dialog>

                    <!-- ********************************************* -->
                    <!-- **************   PANEL GRID ***************** -->
                    <!-- ********************************************* -->
        <h2>Lista de Unidades </h2>
    <p:dataGrid id="dataGrid" value="#{personaUnidadBean.listaUnidad}"
                var="unidad"
                columns="1" emptyMessage="No se encontraron resultados"
                rows="5"  paginatorPosition="bottom"
                paginator="true" rowIndexVar="index">

       <h:form id="frmdataGrid">
           <p:accordionPanel activeIndex="" >
             <p:tab >
                <f:facet name="title">
                    <p:graphicImage value="/images/unidad.png"/>
                    <h:outputText value=" #{index+1}. UNIDAD: #{unidad.nombreComercial}"/>
                </f:facet>
                <p:tabView id="tabVUnidad" orientation="left" effect="slide">
                    <p:tab >
                        <f:facet name="title">
                            <p:graphicImage value="/images/unidad.png"/>
                            <h:outputText value=" #{index+1}. UNIDAD"/>
                        </f:facet>
                        <p:panel header=" #{unidad.nombreComercial}" style="text-align: center">
                            <f:facet name="footer">
                                <p:commandButton id="cmdButtonUnidadR" icon="ui-icon-pencil"
                                                 value="Modificar" onclick="PF('dlgUnidad').show()"
                                                 update=":frmUnidad:pnlUnidad,:txtDldUnidad,:frmUnidad:cmdButtonUnidad">
                                    <f:setPropertyActionListener value="#{unidad}" target="#{personaUnidadBean.unidadRegistro}"/>
                                    <f:setPropertyActionListener value="Modificar" target="#{personaUnidadBean.tituloDialog}"/>
                                    <f:setPropertyActionListener value="ui-icon-pencil" target="#{personaUnidadBean.iconoUnidad}"/>
                                </p:commandButton>
                            </f:facet>
                            <h:panelGrid columns="2" >

                                <h:outputText value="Tipo de empresa:    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                                <p:inputText value="#{unidad.tipoEmpresaAuxiliar}" readonly="true" style="width: 190px;text-transform: uppercase" />

                                <h:outputText value="Fecha actividad:"/>
                                <p:inputText value="#{unidad.fechaNacimiento}" readonly="true" style="width: 190px;">
                                    <f:convertDateTime pattern="dd/MM/yyyy hh:mm a"/>
                                </p:inputText>
                                <h:outputText value="Fundempresa:"/>
                                <p:inputText value="#{unidad.nroFundaempresa}" readonly="true" style="width: 190px;"/>
                                <h:outputText value="Nro. AFP:"/>
                                <p:inputText value="#{unidad.nroAfp}" readonly="true" style="width: 190px;"/>

                                <h:outputText value="Tipo de sociedad: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                                <p:inputText value="#{unidad.tipoSociedadAuxiliar}" readonly="true" style="width: 190px;text-transform: uppercase"/>
                                <h:outputText value="Caja de salud: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" />
                                <p:inputText value="#{unidad.nroCajaSalud}" readonly="true" style="width: 190px;"/>
                                <h:outputText value="Nro. referencial:"/>
                                <p:inputText value="#{unidad.nroReferencial}" readonly="true" style="width: 190px;"/>
                                <h:outputText value="Nro. otro:"/>
                                <p:inputText value="#{unidad.nroOtro}" readonly="true" style="width: 190px;"/>

                                <h:outputText value="Observaciones:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/>
                                <p:inputTextarea id="txtAreaObservacion" value="#{unidad.observaciones}"
                                                 rows="5"
                                                 cols="50"
                                                 autoResize="false"
                                                 style="width: 190px;"
                                                tabindex="11"
                                                readonly="true"/>

                                <h:outputText value="Actividad declarada:&nbsp;&nbsp;&nbsp;&nbsp;"/>
                                <p:inputTextarea id="txtAreaActividadDeclarada" value="#{unidad.actividadDeclarada}"
                                                 rows="5"
                                                 cols="50" autoResize="false"
                                                 style="width: 190px;"
                                                 tabindex="10"
                                                readonly="true"/>
                             </h:panelGrid>
                        </p:panel>
                    </p:tab>

                    <p:tab >
                        <f:facet name="title">
                            <p:graphicImage value="/images/repLegal.png"/>
                            <h:outputText value=" Representante Legal"/>
                        </f:facet>

                        <p:panel id="pnlRepLegal">
                            <f:facet name="footer">
                                <p:commandButton value="Adicionar"
                                                 icon="ui-icon-plus"
                                                 actionListener="#{personaUnidadBean.nuevo}"
                                                 onclick="PF('dlgRepLegal').show()"
                                                 id="cmdButtonRepLegalAdicG"
                                                 update=":frmRepLegal:pnlRepLegal,:txtDlgRepLegal"
                                                 rendered="#{unidad.repLegal==null}">
                                    <f:setPropertyActionListener value="#{unidad}" target="#{personaUnidadBean.unidadRegistro}"/>
                                    <f:setPropertyActionListener value="Agregar" target="#{personaUnidadBean.tituloDialog}"/>
                                    <f:setPropertyActionListener value="ui-icon-plus" target="#{personaUnidadBean.iconoUnidad}"/>
                                </p:commandButton>

                                <p:commandButton value="Modificar"
                                                 icon="ui-icon-pencil"
                                                 onclick="PF('dlgRepLegal').show()"
                                                 id="cmdButtonRepLegalModifG"
                                                 update=":frmRepLegal:pnlRepLegal,:txtDlgRepLegal"
                                                rendered="#{unidad.repLegal!=null}">
                                    <f:setPropertyActionListener value="#{unidad}" target="#{personaUnidadBean.unidadRegistro}"/>
                                    <f:setPropertyActionListener value="#{unidad.repLegal}" target="#{personaUnidadBean.repLegal}"/>
                                    <f:setPropertyActionListener value="Modificar" target="#{personaUnidadBean.tituloDialog}"/>
                                    <f:setPropertyActionListener value="ui-icon-pencil" target="#{personaUnidadBean.iconoUnidad}"/>
                                </p:commandButton>

                            </f:facet>

                            <h:panelGrid columns="2" width="380">
                                <h:outputText value="Nombre:"/>
                                <p:inputText id="inputTxtNombreRepLegal2" value="#{unidad.repLegal.nombre}"
                                             style="width: 210px;"
                                             tabindex="3"
                                             readonly="true"/>

                                <h:outputText value="Ap. paterno: "/>
                                <p:inputText id="inputTxtApPaterno2" value="#{unidad.repLegal.apellidoPaterno}"
                                             style="width: 210px;"
                                             tabindex="3"
                                             readonly="true"/>

                                <h:outputText value="Ap. materno: "/>
                                <p:inputText id="inputTxtApMaterno2" value="#{unidad.repLegal.apellidoMaterno}"
                                             style="width: 210px;"
                                             tabindex="3"
                                             readonly="true"/>

                                <h:outputText value="Tipo de identificacion:"/>
                                <p:inputText id="inputTxtTipoIdentificacion2" value="#{unidad.repLegal.tipoIdentificacion}"
                                             style="width: 210px;"
                                             tabindex="3"
                                             readonly="true"/>

                                <h:outputText value="Nro. de documento: "/>
                                <p:inputText id="inputTxtNroDocumento2" value="#{unidad.repLegal.nroDocumento}"
                                             style="width: 210px;"
                                             tabindex="3"
                                             readonly="true"/>

                                <h:outputText value="Fecha del documento:"/>
                                <p:calendar id="calendar" value="#{unidad.repLegal.fechaDocumento}"
                                            effect="slideDown" tabindex="4"
                                            style="width:210px;"
                                            readonly="true">

                               </p:calendar>

                                <h:outputText value="Departamento:"/>
                                <p:inputText id="inputTxtTipoProcedencia2" value="#{unidad.repLegal.departamento}"
                                             style="width: 210px;"
                                             tabindex="3"
                                             readonly="true"/>
                            </h:panelGrid>
                        </p:panel>
                    </p:tab>

                    <p:tab >
                        <f:facet name="title">
                            <p:graphicImage value="/images/direccion.png"/>
                            <h:outputText value=" Direccion"/>
                        </f:facet>

                        <p:panel id="pnlDireccion" >
                            <f:facet name="footer">

                                <p:commandButton value="Adicionar"
                                                 icon="ui-icon-plus"
                                                 actionListener="#{personaUnidadBean.nuevo}"
                                                 onclick="PF('dlgDireccion').show()"
                                                 id="cmdButtonDireccionAdicG"
                                                update=":frmDireccion:pnlDireccion,:txtDlgDireccion"
                                                rendered="#{unidad.direccion==null}">
                                    <f:setPropertyActionListener value="#{unidad}" target="#{personaUnidadBean.unidadRegistro}"/>
                                    <f:setPropertyActionListener value="Agregar" target="#{personaUnidadBean.tituloDialog}"/>
                                    <f:setPropertyActionListener value="ui-icon-plus" target="#{personaUnidadBean.iconoUnidad}"/>
                                </p:commandButton>

                                <p:commandButton value="Modificar"
                                                 icon="ui-icon-pencil"
                                                 onclick="PF('dlgDireccion').show()"
                                                 id="cmdButtonDireccionModifG"
                                                 update=":frmDireccion:pnlDireccion,:txtDlgDireccion"
                                                rendered="#{unidad.direccion!=null}">
                                    <f:setPropertyActionListener value="#{unidad}" target="#{personaUnidadBean.unidadRegistro}"/>
                                    <f:setPropertyActionListener value="#{unidad.direccion}" target="#{personaUnidadBean.direccion}"/>
                                    <f:setPropertyActionListener value="Modificar" target="#{personaUnidadBean.tituloDialog}"/>
                                    <f:setPropertyActionListener value="ui-icon-pencil" target="#{personaUnidadBean.iconoUnidad}"/>
                                </p:commandButton>
                            </f:facet>
                            <br/>

                            <h:panelGrid columns="2" width="380px;">
                                <h:outputText value="Zona:"/>
                                <p:inputText id="txtAreaZona" value="#{unidad.direccion.zonaUrbanizacion}"
                                             style="width: 220px;"
                                             tabindex="11"
                                             required="true"  readonly="true"
                                             requiredMessage="El campo Zona es obligatorio."/>

                                <h:outputText value="Tipo de direccion:   "/>
                                <p:inputText value="#{unidad.direccion.tipoDireccionAuxiliar}" readonly="true" style="width: 220px;text-transform: uppercase"/>

                                <h:outputText value="Direccion:"/>
                                <p:inputTextarea id="txtAreaDireccion" value="#{unidad.direccion.direccion}"
                                                 rows="5"
                                                 cols="50"
                                                 autoResize="false"
                                                 style="width: 220px;"
                                                tabindex="11"
                                                required="true"  readonly="true"
                                                requiredMessage="El campo Direccion es obligatorio."/>

                                <h:outputText value="Piso, Depto u Oficina:"/>
                                <p:inputText value="#{unidad.direccion.pisoDepOfi}" readonly="true" style="width: 220px;"/>
                                <h:outputText value="Cod. localidad:"/>
                                <p:inputText value="#{unidad.direccion.codLocalidad.descripcion}" readonly="true" style="width: 220px;"/>

                                <h:outputText value="Referencia: "/>
                                <p:inputTextarea id="txtAreaReferencia" value="#{unidad.direccion.referencia}"
                                                 rows="5"
                                                 cols="50"
                                                 autoResize="false"
                                                 style="width: 220px;"
                                                 tabindex="11"
                                                 required="true"  readonly="true"
                                                 requiredMessage="El campo Referencia es obligatorio."/>

                                <h:outputText value="Nro. de telefono(s): "/>
                                <p:inputText value="#{unidad.direccion.telefono} &nbsp;&nbsp;&nbsp; #{unidad.direccion.telefono2}" readonly="true" style="width: 220px;"/>

                                <h:outputText value="Nro. de celular(es): "/>
                                <p:inputText value="#{unidad.direccion.celular} &nbsp;&nbsp;&nbsp; #{unidad.direccion.celular2}" readonly="true" style="width: 220px;"/>

                                <h:outputText value="Correo(s) electronico(s):"/>
                                <p:inputText value="#{unidad.direccion.email} &nbsp;&nbsp;&nbsp; #{unidad.direccion.email2} " readonly="true" style="width: 220px;"/>

                                <h:outputText value="Fax: "/>
                                <p:inputText value="#{unidad.direccion.fax}" readonly="true" style="width: 60px;"/>

                            </h:panelGrid>
                         </p:panel>
                    </p:tab>
                </p:tabView>

             </p:tab>
           </p:accordionPanel>
         </h:form>
       </p:dataGrid>
    </ui:define>
</ui:composition>
</html>
