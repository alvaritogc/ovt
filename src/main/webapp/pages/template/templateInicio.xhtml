<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Oficina Virtual de Trámites</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content=""/>
        <meta name="author" content=""/>

        <!-- Le styles -->
        <link href="#{facesContext.externalContext.requestContextPath}/assets/css/bootstrap.css" rel="stylesheet"/>
        <link href="#{facesContext.externalContext.requestContextPath}/assets/css/bootstrap-responsive.css" rel="stylesheet"/>
        <link href="#{facesContext.externalContext.requestContextPath}/assets/css/docs.css" rel="stylesheet"/>
        <link href="#{facesContext.externalContext.requestContextPath}/assets/js/google-code-prettify/prettify.css" rel="stylesheet"/>

        <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="assets/js/html5shiv.js"></script>
        <![endif]-->

        <!-- Le fav and touch icons -->
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="#{facesContext.externalContext.requestContextPath}/assets/ico/apple-touch-icon-144-precomposed.png"/>
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="#{facesContext.externalContext.requestContextPath}/assets/ico/apple-touch-icon-114-precomposed.png"/>
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="#{facesContext.externalContext.requestContextPath}/assets/ico/apple-touch-icon-72-precomposed.png"/>
        <link rel="apple-touch-icon-precomposed" href="#{facesContext.externalContext.requestContextPath}/assets/ico/apple-touch-icon-57-precomposed.png"/>
        <link rel="shortcut icon" href="#{facesContext.externalContext.requestContextPath}/assets/ico/teclado_icono.png"/>
        <style type="text/css">
            .ui-menu.ui-menu-dynamic{
                position: static;
                display: none;
                z-index: 100000;
                top: -470px;
                left: 76%;
            }
            .navbar {
                background: none repeat scroll 0 0 transparent;
                margin-bottom: 0;
                opacity: 0.9;
                overflow: visible;
            }
            .ui-panelgrid td{
                border-style: none;
            }

            /*.ui-widget-content {*/
            /*border: none;*/
            /*}*/

        </style>
    </h:head>
    <h:body>
        <!-- Navbar
    ================================================== -->



        <!-- Subhead
================================================== -->
        <header class="jumbotron subhead" id="overview">
            <div class="container">
                <h1>Oficina Virtual de Trámites</h1>
                <p class="">Ministerio de Trabajo, Empleo y Previsión Social.</p>
            </div>
        </header>




        <div class="container">

            <!-- Docs nav
            ================================================== -->
            <div class="row">
                <div class="span3 bs-docs-sidebar">
                    <p:growl id="grwLogin" showDetail="false" life="6000" globalOnly="true"  sticky="false"/>
                    <h:form>
                        <p:commandButton value="Inicio" action="#{templateInicioBean.irInicio}" style="width: 100%"/>
                    </h:form>
                    <h:form id="formLogin" class="form-signin" rendered="#{templateInicioBean.idUsuario ==null}">
                        <p:panel  >
                            <h2 class="form-signin-heading">Conéctate</h2>
                            <div class="input-prepend"><span class="add-on"><i class="icon-white icon-user"></i></span>
                                <h:inputText id="userName" value="#{templateInicioBean.username}" required="true" style="width: 104px; font-size: 10px"
                                             requiredMessage=" * Debe ingresar el usuario" />
                                <p:watermark for="userName" value="NIT-NRO REGISTRO" />

                            </div>
                            <h:message for="userName" style="color:red;font-family: Arial; font-size: 10px"/>
                            <div class="input-prepend"><span class="add-on"><i class="icon-white icon-lock"></i>
                                </span>
                                <h:inputSecret id="password" value="#{templateInicioBean.password}" required="true" requiredMessage=" * Debe ingresar el Password" style="width: 104px; font-size: 9px" />
                                <p:watermark for="password" value="NRO-SEGURO-SOCIAL" />
                            </div>
                            <h:message for="password"   style="color:red;font-family: Arial; font-size: 10px"/>
                            <!--<p:captcha label="Captcha" publicKey="6LerTMYSAAAAAGUfbsXu2tf-H8flrPVM1fDUecvi" language="es"-->
                            <!--validatorMessage="Texto no coincide, intente de nuevo." requiredMessage="Ingrese 2 palabras" />-->
                            <p:commandButton styleClass="btn btn-large btn-primary" value="Entrar"
                                             action="#{templateInicioBean.login}"
                                             ajax="false"
                                             update=":grwLogin" />
                            <div class="teclado"></div>
                            <!-- Se comento esta linea, por que se cambio la validacion.-->
                            <!--  <p:messages id="messages" /> -->
                            <p:commandLink value="Ayuda" onclick="PF('dlg1').show();" style="color:red;"/>
                            <br/>
                            <p:commandLink value="Olvido su contrasenia?" onclick="PF('dlg2').show();" style="color:red;" actionListener="#{templateInicioBean.limpiar}" update=":frmOlvidoContrasenia:txtOlvidoNIT,:frmOlvidoContrasenia:txtOlvidoEmail"/>
                            <br/>
                            <p:commandLink value="Regístrate a la oficina vitual" action="#{templateInicioBean.irRegistro}" style="color:#00079C;" immediate="true" />
                        </p:panel>
                        <br/><br/>
                    </h:form>

                    <!-- Dialogos -->
                    <p:dialog id="basicDialog" header="Acceso al Sistema" widgetVar="dlg1" width="700" height="470" resizable="false">  
                        <ui:include src="/mensajes/informacion.xhtml"/>
                    </p:dialog>

                    <p:dialog id="basicDialog2" header="Olvido su contrasenia" modal="true" widgetVar="dlg2" width="420" height="280" resizable="false">
                       <!-- <ui:include src="/mensajes/informacion.xhtml"/>-->

                        <!--<p:ajaxStatus onstart="PF('statusDialog').show();" onsuccess="PF('statusDialog').hide();"/>-->

                        <p:dialog modal="true" widgetVar="statusDialog" header="Cargando"
                                  draggable="false" closable="false">
                            <p:graphicImage value="../../images/ajax-loader.gif" />
                        </p:dialog>
                        <h:form id="frmOlvidoContrasenia">
                        <p:messages id="abc" showDetail="true" autoUpdate="false" closable="true" globalOnly="false" />
                        <br/>
                        <p style="font-size: 12px;">Para recuperar su contrasenia, ingrese su Nro. de identificacion(NIT) y direccion de correo electronico asociada al Sistema.</p>

                         <h:panelGrid columns="1" id="pnlGridContrasenia">
                        <h:outputText value="Nro de identificacion (NIT):"/>
                        <p:inputText id="txtOlvidoNIT" value="#{templateInicioBean.nit}"></p:inputText>
                        <p:watermark for="txtOlvidoNIT" value="Nro de identificacion (NIT)" />
                        <h:outputText value="Correo electronico:"/>
                        <p:inputText id="txtOlvidoEmail" value="#{templateInicioBean.email}"></p:inputText>
                            <p:watermark for="txtOlvidoEmail" value="Correo electronico" />
                         </h:panelGrid>
                            <br/>
                        <p:commandButton value="Enviar"
                                         action="#{templateInicioBean.olvidoContrasenia}"
                                         tabindex="2"
                                         process="@form"
                                         update=":frmOlvidoContrasenia"
                                        >

                        </p:commandButton>

                        </h:form>
                    </p:dialog>

                    <h:form>
                        <p:panel  header="Servicios públicos">
                            <a href="#{facesContext.externalContext.requestContextPath}/faces/pages/publico/informacion.xhtml"> Pasos trámite planilla  trimestral</a>
                            <br/><br/>
                            <a href="#{facesContext.externalContext.requestContextPath}/faces/pages/publico/descargarPlanilla.xhtml"> Descarga de formatos de planillas </a>
                        </p:panel>
                        <br/>
                        <p:dataTable var="recursoPublico" value="#{templateInicioBean.listaRecursosContenido}">  
                            <p:column headerText="Servicios públicos">
                                <p:commandLink value="#{recursoPublico.etiqueta}" action="#{templateInicioBean.verRecursoContenido}">
                                    <f:setPropertyActionListener value="#{recursoPublico}" target="#{templateInicioBean.recurso}" />  
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                       
                    </h:form>
                </div>
                <div class="span9">
                    <h:form id="idBarraDeMenu" rendered="#{!(templateInicioBean.idUsuario == null)}">
                        <p:menubar model="#{templateInicioBean.model}" styleClass="nav-collapse collapse">
                        </p:menubar> 
                    </h:form>
                    <ui:insert name="content">
                        Content
                    </ui:insert>
                </div>
            </div>

        </div>

        <!-- Footer
        ================================================== -->
        <footer class="footer">
            <div class="container" align="center">
                <p><b>Navegadores Soportados: Google Chrome - Firefox</b></p>
                <p:graphicImage value="/images/browser-prime.png"/>
            </div>
        </footer>
    </h:body>
</html>
